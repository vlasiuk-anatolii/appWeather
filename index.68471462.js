var t=function(t){const e=10*Math.round(t-273)/10;return e>0?`+${e}°C`:e<0?`-${e}°C`:`${e}°C`};var e=function(){const t=(new Date).getHours();return t>21||t<6};const n=["January","February","March","April","May","June","July","August","September","October","November","December"];var o=function(o){if("400"===o.cod){document.getElementById("place").textContent="Type city"}else{const a=document.getElementById("temp");o.main.temp&&(a.textContent=t(o.main.temp));const c=document.getElementById("icon"),d=`url(http://openweathermap.org/img/wn/${o.weather[0].icon}@2x.png)`;if(e()){const t=d.replace(/d(?=@)/,"n");c.style.backgroundImage=t}else{const t=d.replace(/n(?=@)/,"d");c.style.backgroundImage=t}document.getElementById("short-kind").textContent=o.weather[0].main;document.getElementById("long-kind").textContent=o.weather[0].description;document.getElementById("place").textContent=`${o.name}, ${o.sys.country}`;const s=document.getElementById("date"),r=new Date(1e3*o.dt);s.textContent=`${r.getDate()} ${n[r.getMonth()]} ${r.getFullYear()}`;document.getElementById("temp-min").textContent=t(o.main.temp_min);document.getElementById("temp-max").textContent=t(o.main.temp_max)}};async function a(t){try{return(await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${t}&APPID=79b60acd04707a3adf97329d89451cf2`)).json()}catch(t){return t}}async function c(t){try{return(await fetch(`http://api.openweathermap.org/data/2.5/find?q=${t}&APPID=79b60acd04707a3adf97329d89451cf2`)).json()}catch(t){return t}}async function d(t,e){try{return(await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=79b60acd04707a3adf97329d89451cf2`)).json()}catch(t){return t}}const s=[];var r=function(t,n,a,c){const r={name:t,lon:n,lat:a,country:c},l=document.createElement("div");l.classList.add("card"),l.classList.add("cities__card");const i=document.createElement("div");i.classList.add("card__images"),e()?i.style.backgroundColor="#2a344b":i.style.backgroundColor="#90caf9";const m=document.createElement("button");m.classList.add("card__button"),i.style.backgroundImage=`url(https://countryflagsapi.com/svg/${r.country})`,t&&(m.textContent=t),i.appendChild(m),l.appendChild(i),m.addEventListener("click",(()=>{d(n,a).then((t=>{o(t),i.style.backgroundImage=`url(https://countryflagsapi.com/svg/${t.sys.country})`,r.country=`${t.sys.country}`})),window.scrollTo({top:0,left:0,behavior:"smooth"})}));const u=document.getElementById("box-images");5===document.getElementsByClassName("cities__card").length&&u.firstElementChild.remove(),5===s.length&&s.shift(),s.push(r),localStorage.setItem("obj",JSON.stringify(s)),u.appendChild(l)};var l=function(){const t=document.getElementsByClassName("dropdown");for(let e=0;e<t.length;e+=1)t[e].remove()};var i=function(t){const n=document.createElement("div");n.classList.add("dropdown");const a=document.createElement("ul");a.setAttribute("id","list"),a.classList.add("dropdown__list"),n.appendChild(a);const c=document.getElementById("label-search"),s=c.parentNode;let i;t instanceof Array?t.forEach((t=>{i=document.createElement("li"),i.setAttribute("data",`${t.name} ${t.sys.country} ${t.id} ${t.coord.lon} ${t.coord.lat}`),a.appendChild(i),i.textContent=`${t.name}, ${t.sys.country}`,e()?i.classList.toggle("dropdown__item-night"):i.classList.toggle("dropdown__item"),i.addEventListener("click",(()=>{d(t.coord.lon,t.coord.lat).then((t=>{t&&o(t)})),l(),r(t.name,t.coord.lon,t.coord.lat,t.sys.country)}))})):(i=document.createElement("li"),i.classList.add("dropdown__item"),a.appendChild(i),i.textContent="City not found!",e()?i.classList.toggle("dropdown__item-night"):i.classList.toggle("dropdown__item"),i.addEventListener("click",(()=>{l()}))),s.insertBefore(n,c)};var m=function(t){c(t).then((t=>{l(),"400"===t.code||0===t.count?i():i(t.list)}))};var u=function(t){a(t).then((t=>{"400"===t.code?i():o(t)}))};(function(t,e){for(let n=0;n<t.length;n+=1)t[n].addEventListener("click",(function(){this.classList.toggle(`${e}`);const t=this.classList[0].match(/answer\d/),n=document.getElementById(t[0]),o=document.getElementById(`question${t[0][t[0].length-1]}`);n.style.maxHeight?(n.style.maxHeight=null,o.style.boxShadow="none"):(n.style.maxHeight=`${n.scrollHeight}px`,o.style.transitionDuration=".5s",o.style.boxShadow="0px -1px 62px -6px rgba(144,202,249,1)")}))})(document.getElementsByClassName("accordion"),"active-arrow");const g=document.getElementById("search");g.addEventListener("keyup",(t=>{m(t.target.value),"Enter"===t.code&&u(t.target.value)}));const y=document.getElementById("button");y.addEventListener("click",(()=>{m(g.value),u(g.value)}));const p=document.getElementById("header");e()?(p.classList.add("header-night"),y.style.backgroundColor="#2a344b"):(p.style.backgroundImage="../images/day.png",y.style.backgroundColor="#90caf9");let h=localStorage.getItem("obj");h&&(h=JSON.parse(h),h.forEach((t=>{r(t.name,t.lon,t.lat,t.country)})));document.getElementById("footer-text").textContent=`Vlasiuk Anatolii - ${(new Date).getFullYear()}`;
//# sourceMappingURL=index.68471462.js.map
